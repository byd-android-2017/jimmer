---
sidebar_position: 6
title: 暴露给客户端API
---

得益于Jimmer动态对象的设计，Jimmer中任何查询都可以返回任意形状的数据结构，为业务系统构建带来了巨额大的灵活性。

然而，动态对象也带来了API模糊性问题，如果不做任何处理，客户端开发人员不清楚每个API返回的数据是什么形状的。

Jimmer提供了两种解决此问题的方式

-   Jimmer提供了一个叫`@FetchBy`的注解，该注解采用对象抓取器常量作为参数，在书写RestController时用此注解修饰API的返回类型或其范型参数。

    这其实是用对象抓取器所包含的数据形状信息，对返回动态对象的API的元信息进行补充。最终，Jimmer可以自动生成客户端代码，在客户端代码中，所有API返回固定形状的静态DTO对象，而非任意形状的的动态实体对象。

    这方面的内容在[Spring篇/前后端免对接](../../spring/client)有非常详细的介绍，这里不再赘述。

    :::info
    大部分场景下，服务端查询出动态对象后直接作为HTTP请求的返回值，服务端自身不会利用这些返回数据。
    
    这就非常适合使用这种方案，服务端简单返回动态实体，并利用`@FetchBy`注解进行元数据增强，让Jimmer生成为每种具体数据形状定义DTO类型的客户端代码。
    :::

-   Jimmer提供了DTO语言，该语言本质上是对象抓取器的另外一种表达方式。

    利用该语言，开发人员可以快速以某个实体类型为聚合根定义多种数据结构的形状，编译器会为每种形状定义生成相应的Java/Kotlin DTO类。每个DTO类型都包含和原动态类型之间的彼此转化逻辑，以及一个和自身形状匹配的对象抓取器。

    这方面的内容在[下篇文档](./dto)中有详细的讨论，这里不再赘述。

    :::info
    某些情况下，服务端查询出某种形状的数据后，并不是为了作为HTTP请求的返回，而是自己用，用来驱动后续的复杂的业务逻辑。

    这就非常适合这种方法，得到静态的DTO类型后，后续复杂业务代码的安全性和开发体验会更高。
    :::